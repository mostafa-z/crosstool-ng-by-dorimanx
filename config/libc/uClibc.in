# uClibc options

## depends on ! WINDOWS && ! BARE_METAL
##
## select LIBC_SUPPORT_THREADS_LT
## select LIBC_SUPPORT_THREADS_NONE
## select LIBC_SUPPORT_THREADS_NATIVE if UCLIBC_0_9_33_2_or_later
## select CC_CORE_PASSES_NEEDED
##
## help The de-facto standard for embeded linux systems.
## help
## help Highly configurable, thus as feature-rich as you
## help need, without compromising for size.

source "config/versions/uClibc.in"

config THREADS
    default "nptl"          if THREADS_NATIVE
    default "linuxthreads"  if THREADS_LT

if ARCH_FLOAT_SOFTFP
comment "'softfp' ABI and uClibc is not entirely tested in crosstool-NG"
comment "You may experience issues, although it should work just fine"
endif # ARCH_FLOAT_SOFTFP

config LIBC_UCLIBC_PARALLEL
    def_bool y
    depends on UCLIBC_0_9_33_2_or_later

config LIBC_UCLIBC_NG
    def_bool y
    depends on UCLIBC_1_0_0_or_later

# uClibc-ng 1.0.15 did away with 2 implementations of linuxthreads
config UCLIBC_MERGED_LINUXTHREADS
    def_bool y
    depends on UCLIBC_1_0_15_or_later

choice
    bool
    prompt "uClibc verbosity:"
    default LIBC_UCLIBC_VERBOSITY_0

config LIBC_UCLIBC_VERBOSITY_0
    bool
    prompt "Quiet build"
    help
      Print terse command indications.

config LIBC_UCLIBC_VERBOSITY_1
    bool
    prompt "Brief build (show defines, ld flags)"
    help
      Print simplified command lines.

config LIBC_UCLIBC_VERBOSITY_2
    bool
    prompt "Very verbose build"
    help
      Print full command lines.

endchoice

# uClibc-ng has reverted the meaning of V=1 and V=2 compared to its
# ancestor, uClibc, in order to match kernel's Kbuild settings.
# Hence, for uClibc-ng supply V=2 if "brief build" is selected,
# and so forth.
config LIBC_UCLIBC_VERBOSITY
    string
    default ""      if LIBC_UCLIBC_VERBOSITY_0
    default "V=2"   if LIBC_UCLIBC_VERBOSITY_1 && LIBC_UCLIBC_NG
    default "V=1"   if LIBC_UCLIBC_VERBOSITY_1
    default "V=1"   if LIBC_UCLIBC_VERBOSITY_2 && LIBC_UCLIBC_NG
    default "V=2"   if LIBC_UCLIBC_VERBOSITY_2

choice
    bool
    prompt "Debug level"
    default LIBC_UCLIBC_DEBUG_LEVEL_0

config LIBC_UCLIBC_DEBUG_LEVEL_0
    bool
    prompt "none"

config LIBC_UCLIBC_DEBUG_LEVEL_1
    bool
    prompt "minimal"

config LIBC_UCLIBC_DEBUG_LEVEL_2
    bool
    prompt "normal"

config LIBC_UCLIBC_DEBUG_LEVEL_3
    bool
    prompt "all"

endchoice

config LIBC_UCLIBC_DEBUG_LEVEL
    int
    default 0 if LIBC_UCLIBC_DEBUG_LEVEL_0
    default 1 if LIBC_UCLIBC_DEBUG_LEVEL_1
    default 2 if LIBC_UCLIBC_DEBUG_LEVEL_2

config LIBC_UCLIBC_CONFIG_FILE
    string
    prompt "Configuration file"
    default ""
    help
      Path to the configuration file.

      If the file is not provided, we fall back to a default config file.
